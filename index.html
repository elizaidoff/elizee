<html lang="he" dir="rtl"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>האתר שלי - דף יחיד</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* הגדרת פונט Inter כברירת מחדל */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f0f0; /* רקע כללי בהיר */
            transition: background-image 0.5s ease-in-out; /* אנימציה לרקע */
            background-size: cover;
            background-position: center;
        }
        /* סגנון כללי לקישורים בכפתורים */
        .button-link {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: white;
            padding: 1rem;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
            transition: box-shadow 300ms ease-in-out;
            text-decoration: none; /* הסרת קו תחתון מקישור */
            color: inherit; /* ירושה של צבע הטקסט */
            cursor: pointer; /* כדי לציין שזה לחיץ */
        }
        .button-link:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* hover:shadow-lg */
        }
        /* הסתרת דפים כברירת מחדל */
        .page-content {
            display: none;
        }
        /* הצגת הדף הפעיל */
        .page-content.active {
            display: block;
        }
        /* סגנון למודאל */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7); /* רקע שחור חצי שקוף */
        }
        .modal-content {
            max-height: 90vh; /* גובה מקסימלי של המודאל */
            overflow: hidden; /* כדי לאפשר גלילה רק לתוכן הפוסט */
        }
        .modal-body {
            overflow-y: auto; /* גלילה אנכית לתוכן הפוסט */
            flex-grow: 1; /* יתפוס כמה שיותר מקום במודאל */
        }
        /* סגנון לתמונות בפוסטים */
        .post-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 1rem auto; /* שוליים אוטומטיים למרכוז */
            object-fit: contain; /* תמונה תוצג במלואה */
        }
    </style>
    <!-- Google tag (gtag.js) -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MEXP0GHFC4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-MEXP0GHFC4');
    </script>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0px}.left-1\/2{left:50%}.left-3{left:0.75rem}.left-4{left:1rem}.right-4{right:1rem}.top-1\/2{top:50%}.top-3{top:0.75rem}.z-50{z-index:50}.z-\[100\]{z-index:100}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:0.5rem}.mb-3{margin-bottom:0.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mr-2{margin-right:0.5rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mb-1{margin-bottom:0.25rem}.ml-2{margin-left:0.5rem}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-12{height:3rem}.h-20{height:5rem}.h-24{height:6rem}.h-48{height:12rem}.h-6{height:1.5rem}.h-14{height:3.5rem}.h-10{height:2.5rem}.h-5{height:1.25rem}.min-h-screen{min-height:100vh}.w-11\/12{width:91.666667%}.w-12{width:3rem}.w-24{width:6rem}.w-6{width:1.5rem}.w-96{width:24rem}.w-full{width:100%}.w-14{width:3.5rem}.w-10{width:2.5rem}.w-5{width:1.25rem}.max-w-2xl{max-width:42rem}.max-w-4xl{max-width:56rem}.max-w-5xl{max-width:64rem}.max-w-md{max-width:28rem}.flex-grow{flex-grow:1}.-translate-x-1\/2{--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\/2{--tw-translate-y:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.appearance-none{-webkit-appearance:none;appearance:none}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-2{gap:0.5rem}.space-x-4 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.25rem * var(--tw-space-y-reverse))}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-8 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.space-x-2 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.5rem * var(--tw-space-x-reverse));margin-left:calc(0.5rem * calc(1 - var(--tw-space-x-reverse)))}.rounded{border-radius:0.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-xl{border-radius:0.75rem}.rounded-l{border-top-left-radius:0.25rem;border-bottom-left-radius:0.25rem}.rounded-r{border-top-right-radius:0.25rem;border-bottom-right-radius:0.25rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity:1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-blue-400{--tw-border-opacity:1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.bg-blue-500{--tw-bg-opacity:1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity:1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-purple-600{--tw-bg-opacity:1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-yellow-500{--tw-bg-opacity:1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-opacity-70{--tw-bg-opacity:0.7}.object-cover{object-fit:cover}.p-2{padding:0.5rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.pb-4{padding-bottom:1rem}.pt-4{padding-top:1rem}.text-center{text-align:center}.text-right{text-align:right}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.leading-tight{line-height:1.25}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity:1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.opacity-0{opacity:0}.shadow{--tw-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-200{transition-duration:200ms}.duration-300{transition-duration:300ms}.duration-500{transition-duration:500ms}.ease-out{transition-timing-function:cubic-bezier(0, 0, 0.2, 1)}.file\:mr-4::file-selector-button{margin-right:1rem}.file\:mr-2::file-selector-button{margin-right:0.5rem}.file\:rounded-full::file-selector-button{border-radius:9999px}.file\:border-0::file-selector-button{border-width:0px}.file\:bg-blue-50::file-selector-button{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.file\:px-4::file-selector-button{padding-left:1rem;padding-right:1rem}.file\:py-2::file-selector-button{padding-top:0.5rem;padding-bottom:0.5rem}.file\:px-2::file-selector-button{padding-left:0.5rem;padding-right:0.5rem}.file\:py-1::file-selector-button{padding-top:0.25rem;padding-bottom:0.25rem}.file\:text-sm::file-selector-button{font-size:0.875rem;line-height:1.25rem}.file\:font-semibold::file-selector-button{font-weight:600}.file\:text-blue-700::file-selector-button{--tw-text-opacity:1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.hover\:bg-blue-600:hover{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-300:hover{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-400:hover{--tw-bg-opacity:1;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600:hover{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-700:hover{--tw-bg-opacity:1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.hover\:bg-red-600:hover{--tw-bg-opacity:1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.hover\:bg-yellow-600:hover{--tw-bg-opacity:1;background-color:rgb(202 138 4 / var(--tw-bg-opacity, 1))}.hover\:text-gray-800:hover{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.hover\:text-gray-900:hover{--tw-text-opacity:1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.hover\:text-blue-700:hover{--tw-text-opacity:1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.hover\:text-gray-700:hover{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\:text-red-700:hover{--tw-text-opacity:1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.hover\:file\:bg-blue-100::file-selector-button:hover{--tw-bg-opacity:1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:0.5}@media (min-width: 768px){.md\:col-span-2{grid-column:span 2 / span 2}.md\:col-span-3{grid-column:span 3 / span 3}.md\:w-3\/4{width:75%}.md\:w-5\/6{width:83.333333%}.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.md\:p-8{padding:2rem}.md\:text-5xl{font-size:3rem;line-height:1}.md\:text-xl{font-size:1.25rem;line-height:1.75rem}}@media (min-width: 1024px){.lg\:w-2\/3{width:66.666667%}.lg\:w-4\/5{width:80%}}@media (min-width: 1280px){.xl\:w-1\/2{width:50%}.xl\:w-3\/4{width:75%}}</style></head>
<body class="flex flex-col min-h-screen" style="background-image: none;">

    <!-- כותרת עליונה עם רקע חצי שקוף - משותפת לכל הדפים -->
    <header class="text-white p-6 text-center relative">
        <!-- כפתור חזרה לדף הבית (מוצג רק בבלוג) -->
        <a href="#home" class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-700 hover:text-gray-900 transition-colors duration-200 bg-white rounded-full w-12 h-12 flex items-center justify-center shadow-md hidden" id="home-button-header" onclick="event.preventDefault(); navigateTo('home')">
            <!-- אייקון בית חדש -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l9-9 9 9M5 10v9a2 2 0 002 2h10a2 2 0 002-2v-9"></path>
            </svg>
        </a>
        <!-- כפתור צרו קשר -->
        <button class="absolute left-4 top-1/2 -translate-y-1/2 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors duration-200" onclick="openContactModal()">
            צרו קשר
        </button>

        <!-- מיכל לכותרת וכותרת משנה - ממורכז בנפרד -->
        <div class="bg-gray-200 bg-opacity-70 rounded-xl shadow-lg mx-auto max-w-2xl p-4 flex flex-col items-center justify-center cursor-pointer" id="header-content-area">
            <h1 class="text-4xl md:text-5xl font-bold mb-2 text-gray-800" id="main-title">ברוכים הבאים לאתר שלי</h1>
            <p class="text-lg md:text-xl text-gray-600" id="main-subtitle">כאן תמצאו את כל מה שאתם צריכים</p>
        </div>
    </header>

    <!-- תוכן דף הבית -->
    <div id="home-page" class="page-content flex-grow container mx-auto p-4 md:p-8 active">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="home-buttons-container"><div class="flex flex-col space-y-4"><a class="button-link" href="#post-modal-post1">
                    <span class="text-xl font-semibold text-gray-800">כפתור לדוגמה 1 (פוסט)</span>
                    <img src="https://placehold.co/60x60/87CEEB/FFFFFF?text=1" alt="כפתור לדוגמה 1 (פוסט)" class="w-14 h-14 rounded-full object-cover border-2 border-blue-400">
                </a><a class="button-link" href="#blog">
                    <span class="text-xl font-semibold text-gray-800">כפתור לדוגמה 3 (בלוג)</span>
                    <img src="https://placehold.co/60x60/90EE90/FFFFFF?text=3" alt="כפתור לדוגמה 3 (בלוג)" class="w-14 h-14 rounded-full object-cover border-2 border-blue-400">
                </a></div><div class="flex flex-col space-y-4"><a class="button-link" href="https://www.google.com" target="_blank">
                    <span class="text-xl font-semibold text-gray-800">כפתור לדוגמה 2 (חיצוני)</span>
                    <img src="https://placehold.co/60x60/FFD700/FFFFFF?text=2" alt="כפתור לדוגמה 2 (חיצוני)" class="w-14 h-14 rounded-full object-cover border-2 border-blue-400">
                </a></div></div>
    </div>

    <!-- תוכן דף הבלוג -->
    <div id="blog-page" class="page-content flex-grow container mx-auto p-4 md:p-8">
        <div class="flex flex-col space-y-4 max-w-2xl mx-auto" id="blog-posts-container"><a class="button-link" href="#post-modal-post1">
                    <span class="text-xl font-semibold text-gray-800">פוסט חדש: טיפים לעיצוב אתרים</span>
                    <img src="https://placehold.co/60x60/ADD8E6/FFFFFF?text=P1" alt="פוסט חדש: טיפים לעיצוב אתרים" class="w-14 h-14 rounded-full object-cover border-2 border-blue-300">
                </a><a class="button-link" href="#post-modal-post2">
                    <span class="text-xl font-semibold text-gray-800">מדריך: בניית אתר מהיר</span>
                    <img src="https://placehold.co/60x60/FFB6C1/FFFFFF?text=P2" alt="מדריך: בניית אתר מהיר" class="w-14 h-14 rounded-full object-cover border-2 border-blue-300">
                </a><a class="button-link" href="#post-modal-post3">
                    <span class="text-xl font-semibold text-gray-800">חידושים בעולם ה-AI</span>
                    <img src="https://placehold.co/60x60/DDA0DD/FFFFFF?text=P3" alt="חידושים בעולם ה-AI" class="w-14 h-14 rounded-full object-cover border-2 border-blue-300">
                </a></div>
    </div>

    <!-- מודאל פוסט בודד -->
    <div id="post-modal-overlay" class="fixed inset-0 modal-overlay flex items-center justify-center z-50 hidden">
        <div id="post-modal-content" class="bg-white p-6 rounded-xl shadow-lg max-w-4xl w-11/12 md:w-3/4 lg:w-2/3 xl:w-1/2 relative flex flex-col modal-content">
            <!-- כפתור סגירה -->
            <button class="absolute top-3 left-3 text-gray-500 hover:text-gray-800 text-3xl font-bold" onclick="closePostModal()">
                ×
            </button>
            <!-- כותרת הפוסט בתוך המודאל -->
            <h2 class="text-3xl font-bold mb-2 text-gray-800 text-center" id="modal-post-title"></h2>
            <p class="text-md text-gray-600 text-center mb-4" id="modal-post-subtitle"></p>

            <!-- תוכן הפוסט -->
            <div class="prose lg:prose-xl text-gray-800 modal-body p-2" id="modal-post-body">
                <!-- תוכן הפוסט ייטען כאן על ידי JavaScript -->
            </div>

            <!-- כפתורי ניווט בתוך המודאל -->
            <div class="mt-6 flex justify-between items-center border-t pt-4">
                <button id="prev-post-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed" onclick="navigatePost(-1)">
                    פוסט קודם
                </button>
                <!-- מיכל לכפתור Ko-fi והטקסט המותאם אישית -->
                <div id="kofi-area-container" class="flex flex-col items-center space-y-2 hidden">
                    <p id="kofi-custom-text" class="text-sm text-gray-600 text-center"></p>
                    <a id="kofi-button-link" target="_blank" class="inline-block bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300">
                        <!-- טקסט כפתור Ko-fi ייטען ע"י JS -->
                    </a>
                </div>
                <button id="next-post-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed" onclick="navigatePost(1)">
                    פוסט הבא
                </button>
            </div>
        </div>
    </div>

    <!-- מודאל כניסה למנהל -->
    <div id="admin-login-modal-overlay" class="fixed inset-0 modal-overlay flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-xl shadow-lg w-96 text-center">
            <h2 class="text-2xl font-bold mb-4 text-gray-800">הכנס סיסמת מנהל</h2>
            <input type="password" id="admin-password-input" class="w-full p-3 border border-gray-300 rounded-lg mb-4 text-center text-lg" placeholder="הכנס סיסמה">
            <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 w-full" onclick="checkAdminPassword()">
                התחבר
            </button>
            <p id="login-error-message" class="text-red-500 mt-2 hidden">סיסמה שגויה. נסה שוב.</p>
        </div>
    </div>

    <!-- מודאל פאנל ניהול -->
    <div id="admin-panel-modal-overlay" class="fixed inset-0 modal-overlay flex items-center justify-center z-50 hidden">
        <div id="admin-panel-content" class="bg-white p-6 rounded-xl shadow-lg max-w-5xl w-11/12 md:w-5/6 lg:w-4/5 xl:w-3/4 relative flex flex-col modal-content">
            <!-- כפתור סגירה -->
            <button class="absolute top-3 left-3 text-gray-500 hover:text-gray-800 text-3xl font-bold" onclick="closeAdminPanel()">
                ×
            </button>
            <h2 class="text-3xl font-bold mb-4 text-gray-800 text-center">פאנל ניהול</h2>

            <div class="modal-body p-2 space-y-8">
                <!-- הגדרות כלליות -->
                <section class="border-b pb-4">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-700">הגדרות כלליות</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="admin-main-title" class="block text-gray-700 text-sm font-bold mb-2">כותרת ראשית:</label>
                            <input type="text" id="admin-main-title" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" onkeyup="updateGeneralSettings()">
                        </div>
                        <div>
                            <label for="admin-subtitle" class="block text-gray-700 text-sm font-bold mb-2">כותרת משנה:</label>
                            <input type="text" id="admin-subtitle" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" onkeyup="updateGeneralSettings()">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-gray-700 text-sm font-bold mb-2">תמונת רקע כללית:</label>
                            <input type="file" id="admin-global-bg-upload" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                            <div class="mt-2 flex items-center space-x-4">
                                <img id="admin-global-bg-preview" src="" alt="תצוגה מקדימה" class="w-24 h-24 object-cover rounded-lg border hidden">
                                <button class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300" onclick="removeGlobalBackground()">הסר תמונה</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- הגדרות כפתורי דף הבית -->
                <section class="border-b pb-4">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-700">כפתורי דף הבית</h3>
                    <div id="admin-home-buttons-list" class="space-y-4"><div class="flex items-center space-x-4 p-3 border rounded-lg bg-gray-50 relative" draggable="true" data-index="0">
                    <div class="flex-grow grid grid-cols-1 md:grid-cols-3 gap-2 items-center">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">טקסט:</label>
                            <input type="text" value="כפתור לדוגמה 1 (פוסט)" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateHomeButton(0, 'text', this.value)">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">סוג:</label>
                            <select class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onchange="updateHomeButtonType(0, this.value)">
                                <option value="post" selected="">פוסט</option>
                                <option value="external">קישור חיצוני</option>
                                <option value="blog">דף בלוג</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">יעד:</label>
                            <input type="text" value="post1" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateHomeButtonTargetValue(0, this.value)">
                        </div>
                        
                        <div class="md:col-span-3">
                            <label class="block text-gray-700 text-sm font-bold mb-1">תמונה:</label>
                            <input type="file" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" onchange="updateHomeButtonImage(0, this.files[0])">
                            <div class="mt-1 flex items-center space-x-2">
                                <img src="https://placehold.co/60x60/87CEEB/FFFFFF?text=1" alt="תצוגה מקדימה" class="w-10 h-10 rounded-full object-cover border ">
                                <button class="text-red-500 hover:text-red-700 text-sm" onclick="removeHomeButtonImage(0)">הסר</button>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-1 ml-2">
                        <button class="text-red-500 hover:text-red-700" onclick="removeHomeButton(0)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.927a2.25 2.25 0 01-2.244-2.077L4.74 5.61a1.125 1.125 0 011.12-1.22l10.047-.842a.75.75 0 01.75.75V4.5a2.25 2.25 0 00-2.25-2.25H12.75M15 9V5.25A2.25 2.25 0 0012.75 3h-1.5A2.25 2.25 0 009 5.25V9m-3.75 0h7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveHomeButton(0, -1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveHomeButton(0, 1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path></svg>
                        </button>
                    </div>
                </div><div class="flex items-center space-x-4 p-3 border rounded-lg bg-gray-50 relative" draggable="true" data-index="1">
                    <div class="flex-grow grid grid-cols-1 md:grid-cols-3 gap-2 items-center">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">טקסט:</label>
                            <input type="text" value="כפתור לדוגמה 2 (חיצוני)" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateHomeButton(1, 'text', this.value)">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">סוג:</label>
                            <select class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onchange="updateHomeButtonType(1, this.value)">
                                <option value="post">פוסט</option>
                                <option value="external" selected="">קישור חיצוני</option>
                                <option value="blog">דף בלוג</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">יעד:</label>
                            <input type="text" value="https://www.google.com" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateHomeButtonTargetValue(1, this.value)">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">יעד פתיחה:</label>
                            <select class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onchange="updateHomeButton(1, 'target', this.value)">
                                <option value="_blank" selected="">כרטיסייה חדשה</option>
                                <option value="_self">אותה כרטיסייה</option>
                            </select>
                        </div>
                    
                        <div class="md:col-span-3">
                            <label class="block text-gray-700 text-sm font-bold mb-1">תמונה:</label>
                            <input type="file" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" onchange="updateHomeButtonImage(1, this.files[0])">
                            <div class="mt-1 flex items-center space-x-2">
                                <img src="https://placehold.co/60x60/FFD700/FFFFFF?text=2" alt="תצוגה מקדימה" class="w-10 h-10 rounded-full object-cover border ">
                                <button class="text-red-500 hover:text-red-700 text-sm" onclick="removeHomeButtonImage(1)">הסר</button>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-1 ml-2">
                        <button class="text-red-500 hover:text-red-700" onclick="removeHomeButton(1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.927a2.25 2.25 0 01-2.244-2.077L4.74 5.61a1.125 1.125 0 011.12-1.22l10.047-.842a.75.75 0 01.75.75V4.5a2.25 2.25 0 00-2.25-2.25H12.75M15 9V5.25A2.25 2.25 0 0012.75 3h-1.5A2.25 2.25 0 009 5.25V9m-3.75 0h7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveHomeButton(1, -1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveHomeButton(1, 1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path></svg>
                        </button>
                    </div>
                </div><div class="flex items-center space-x-4 p-3 border rounded-lg bg-gray-50 relative" draggable="true" data-index="2">
                    <div class="flex-grow grid grid-cols-1 md:grid-cols-3 gap-2 items-center">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">טקסט:</label>
                            <input type="text" value="כפתור לדוגמה 3 (בלוג)" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateHomeButton(2, 'text', this.value)">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">סוג:</label>
                            <select class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onchange="updateHomeButtonType(2, this.value)">
                                <option value="post">פוסט</option>
                                <option value="external">קישור חיצוני</option>
                                <option value="blog" selected="">דף בלוג</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">יעד:</label>
                            <input type="text" value="blog" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateHomeButtonTargetValue(2, this.value)">
                        </div>
                        
                        <div class="md:col-span-3">
                            <label class="block text-gray-700 text-sm font-bold mb-1">תמונה:</label>
                            <input type="file" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" onchange="updateHomeButtonImage(2, this.files[0])">
                            <div class="mt-1 flex items-center space-x-2">
                                <img src="https://placehold.co/60x60/90EE90/FFFFFF?text=3" alt="תצוגה מקדימה" class="w-10 h-10 rounded-full object-cover border ">
                                <button class="text-red-500 hover:text-red-700 text-sm" onclick="removeHomeButtonImage(2)">הסר</button>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-1 ml-2">
                        <button class="text-red-500 hover:text-red-700" onclick="removeHomeButton(2)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.927a2.25 2.25 0 01-2.244-2.077L4.74 5.61a1.125 1.125 0 011.12-1.22l10.047-.842a.75.75 0 01.75.75V4.5a2.25 2.25 0 00-2.25-2.25H12.75M15 9V5.25A2.25 2.25 0 0012.75 3h-1.5A2.25 2.25 0 009 5.25V9m-3.75 0h7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveHomeButton(2, -1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveHomeButton(2, 1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path></svg>
                        </button>
                    </div>
                </div></div>
                    <button class="mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300" onclick="addHomeButton()">הוסף כפתור חדש</button>
                </section>

                <!-- הגדרות בלוג -->
                <section class="border-b pb-4">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-700">הגדרות בלוג</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="admin-blog-title" class="block text-gray-700 text-sm font-bold mb-2">כותרת בלוג:</label>
                            <input type="text" id="admin-blog-title" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" onkeyup="updateBlogSettings()">
                        </div>
                        <div>
                            <label for="admin-blog-subtitle" class="block text-gray-700 text-sm font-bold mb-2">כותרת משנה בלוג:</label>
                            <input type="text" id="admin-blog-subtitle" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" onkeyup="updateBlogSettings()">
                        </div>
                    </div>
                    <h4 class="text-xl font-semibold mt-6 mb-3 text-gray-700">פוסטים בבלוג:</h4>
                    <div id="admin-blog-posts-list" class="space-y-4"><div class="flex items-center space-x-4 p-3 border rounded-lg bg-gray-50 relative" draggable="true" data-index="0">
                    <div class="flex-grow grid grid-cols-1 md:grid-cols-3 gap-2 items-center">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">טקסט כפתור:</label>
                            <input type="text" value="פוסט חדש: טיפים לעיצוב אתרים" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateBlogPostRef(0, 'text', this.value)">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">בחר פוסט:</label>
                            <select class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onchange="updateBlogPostRef(0, 'targetId', this.value)">
                                
                    <option value="post1" selected="">
                        טיפים לעיצוב אתרים מודרני (post1)
                    </option>
                
                    <option value="post2">
                        מדריך מקיף: בניית אתר אינטרנט מהיר ויעיל (post2)
                    </option>
                
                    <option value="post3">
                        החידושים האחרונים בעולם הבינה המלאכותית (AI) (post3)
                    </option>
                
                            </select>
                        </div>
                        <div class="md:col-span-3 flex items-center space-x-2">
                            <label class="block text-gray-700 text-sm font-bold mb-1">תמונה:</label>
                            <input type="file" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" onchange="updateBlogPostRefImage(0, this.files[0])">
                            <div class="mt-1 flex items-center space-x-2">
                                <img src="https://placehold.co/60x60/ADD8E6/FFFFFF?text=P1" alt="תצוגה מקדימה" class="w-10 h-10 rounded-full object-cover border ">
                                <button class="text-red-500 hover:text-red-700 text-sm" onclick="removeBlogPostRefImage(0)">הסר</button>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-1 ml-2">
                        <!-- כפתור עריכת תוכן הפוסט -->
                        <button class="text-blue-500 hover:text-blue-700" onclick="openAdminPostEditModal('post1')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14.25v4.5a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18V7.5A2.25 2.25 0 015.25 5.25h4.5"></path></svg>
                        </button>
                        <button class="text-red-500 hover:text-red-700" onclick="removeBlogPost(0)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.927a2.25 2.25 0 01-2.244-2.077L4.74 5.61a1.125 1.125 0 011.12-1.22l10.047-.842a.75.75 0 01.75.75V4.5a2.25 2.25 0 00-2.25-2.25H12.75M15 9V5.25A2.25 2.25 0 0012.75 3h-1.5A2.25 2.25 0 009 5.25V9m-3.75 0h7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveBlogPost(0, -1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveBlogPost(0, 1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path></svg>
                        </button>
                    </div>
                </div><div class="flex items-center space-x-4 p-3 border rounded-lg bg-gray-50 relative" draggable="true" data-index="1">
                    <div class="flex-grow grid grid-cols-1 md:grid-cols-3 gap-2 items-center">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">טקסט כפתור:</label>
                            <input type="text" value="מדריך: בניית אתר מהיר" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateBlogPostRef(1, 'text', this.value)">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">בחר פוסט:</label>
                            <select class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onchange="updateBlogPostRef(1, 'targetId', this.value)">
                                
                    <option value="post1">
                        טיפים לעיצוב אתרים מודרני (post1)
                    </option>
                
                    <option value="post2" selected="">
                        מדריך מקיף: בניית אתר אינטרנט מהיר ויעיל (post2)
                    </option>
                
                    <option value="post3">
                        החידושים האחרונים בעולם הבינה המלאכותית (AI) (post3)
                    </option>
                
                            </select>
                        </div>
                        <div class="md:col-span-3 flex items-center space-x-2">
                            <label class="block text-gray-700 text-sm font-bold mb-1">תמונה:</label>
                            <input type="file" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" onchange="updateBlogPostRefImage(1, this.files[0])">
                            <div class="mt-1 flex items-center space-x-2">
                                <img src="https://placehold.co/60x60/FFB6C1/FFFFFF?text=P2" alt="תצוגה מקדימה" class="w-10 h-10 rounded-full object-cover border ">
                                <button class="text-red-500 hover:text-red-700 text-sm" onclick="removeBlogPostRefImage(1)">הסר</button>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-1 ml-2">
                        <!-- כפתור עריכת תוכן הפוסט -->
                        <button class="text-blue-500 hover:text-blue-700" onclick="openAdminPostEditModal('post2')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14.25v4.5a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18V7.5A2.25 2.25 0 015.25 5.25h4.5"></path></svg>
                        </button>
                        <button class="text-red-500 hover:text-red-700" onclick="removeBlogPost(1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.927a2.25 2.25 0 01-2.244-2.077L4.74 5.61a1.125 1.125 0 011.12-1.22l10.047-.842a.75.75 0 01.75.75V4.5a2.25 2.25 0 00-2.25-2.25H12.75M15 9V5.25A2.25 2.25 0 0012.75 3h-1.5A2.25 2.25 0 009 5.25V9m-3.75 0h7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveBlogPost(1, -1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveBlogPost(1, 1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path></svg>
                        </button>
                    </div>
                </div><div class="flex items-center space-x-4 p-3 border rounded-lg bg-gray-50 relative" draggable="true" data-index="2">
                    <div class="flex-grow grid grid-cols-1 md:grid-cols-3 gap-2 items-center">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">טקסט כפתור:</label>
                            <input type="text" value="חידושים בעולם ה-AI" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateBlogPostRef(2, 'text', this.value)">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">בחר פוסט:</label>
                            <select class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onchange="updateBlogPostRef(2, 'targetId', this.value)">
                                
                    <option value="post1">
                        טיפים לעיצוב אתרים מודרני (post1)
                    </option>
                
                    <option value="post2">
                        מדריך מקיף: בניית אתר אינטרנט מהיר ויעיל (post2)
                    </option>
                
                    <option value="post3" selected="">
                        החידושים האחרונים בעולם הבינה המלאכותית (AI) (post3)
                    </option>
                
                            </select>
                        </div>
                        <div class="md:col-span-3 flex items-center space-x-2">
                            <label class="block text-gray-700 text-sm font-bold mb-1">תמונה:</label>
                            <input type="file" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" onchange="updateBlogPostRefImage(2, this.files[0])">
                            <div class="mt-1 flex items-center space-x-2">
                                <img src="https://placehold.co/60x60/DDA0DD/FFFFFF?text=P3" alt="תצוגה מקדימה" class="w-10 h-10 rounded-full object-cover border ">
                                <button class="text-red-500 hover:text-red-700 text-sm" onclick="removeBlogPostRefImage(2)">הסר</button>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-1 ml-2">
                        <!-- כפתור עריכת תוכן הפוסט -->
                        <button class="text-blue-500 hover:text-blue-700" onclick="openAdminPostEditModal('post3')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14.25v4.5a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18V7.5A2.25 2.25 0 015.25 5.25h4.5"></path></svg>
                        </button>
                        <button class="text-red-500 hover:text-red-700" onclick="removeBlogPost(2)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.927a2.25 2.25 0 01-2.244-2.077L4.74 5.61a1.125 1.125 0 011.12-1.22l10.047-.842a.75.75 0 01.75.75V4.5a2.25 2.25 0 00-2.25-2.25H12.75M15 9V5.25A2.25 2.25 0 0012.75 3h-1.5A2.25 2.25 0 009 5.25V9m-3.75 0h7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveBlogPost(2, -1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5"></path></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveBlogPost(2, 1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path></svg>
                        </button>
                    </div>
                </div></div>
                    <button class="mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300" onclick="addBlogPost()">הוסף פוסט לבלוג</button>
                </section>

                <!-- הגדרות Ko-fi -->
                <section class="border-b pb-4">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-700">הגדרות Ko-fi</h3>
                    <div class="flex items-center mb-4">
                        <input type="checkbox" id="admin-kofi-enabled" class="mr-2" onchange="updateKofiSettings()">
                        <label for="admin-kofi-enabled" class="text-gray-700">הצג כפתור Ko-fi בפוסטים</label>
                    </div>
                    <div class="mt-4">
                        <label for="admin-kofi-custom-text" class="block text-gray-700 text-sm font-bold mb-2">טקסט תמיכה (מעל הכפתור):</label>
                        <textarea id="admin-kofi-custom-text" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-20" onkeyup="updateKofiSettings()"></textarea>
                    </div>
                    <div class="mt-4">
                        <label for="admin-kofi-text" class="block text-gray-700 text-sm font-bold mb-2">טקסט כפתור Ko-fi:</label>
                        <input type="text" id="admin-kofi-text" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" onkeyup="updateKofiSettings()">
                    </div>
                    <div class="mt-4">
                        <label for="admin-kofi-link" class="block text-gray-700 text-sm font-bold mb-2">קישור Ko-fi:</label>
                        <input type="url" id="admin-kofi-link" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" onkeyup="updateKofiSettings()">
                    </div>
                </section>

                <!-- הגדרות טופס יצירת קשר -->
                <section class="border-b pb-4">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-700">הגדרות טופס יצירת קשר</h3>
                    <div>
                        <label for="admin-contact-email" class="block text-gray-700 text-sm font-bold mb-2">אימייל לשליחת טופס:</label>
                        <input type="email" id="admin-contact-email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" onkeyup="updateContactSettings()">
                    </div>
                </section>

                <!-- הגדרות הפניה אוטומטית לפי אתר מפנה -->
                <section class="border-b pb-4">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-700">הגדרות הפניה אוטומטית לפי אתר מפנה</h3>
                    <div class="mb-4">
                        <label for="admin-redirect-referrer-input" class="block text-gray-700 text-sm font-bold mb-2">הוסף כתובת URL להפניה אוטומטית:</label>
                        <div class="flex">
                            <input type="url" id="admin-redirect-referrer-input" class="shadow appearance-none border rounded-l w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="לדוגמה: https://my-other-site.com/blocked-page.html">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-r transition-colors duration-300" onclick="addRedirectReferrer()">הוסף</button>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">האתר יופנה אוטומטית בחזרה לכתובת זו אם הוא נפתח ממנה.</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-semibold mb-2 text-gray-700">כתובות URL להפניה אוטומטית:</h4>
                        <ul id="admin-redirect-referrers-list" class="list-disc list-inside space-y-1"><li class="flex justify-between items-center bg-gray-100 p-2 rounded-lg">
                    <span>https://elizaidoff.github.io/ResuMaker-</span>
                    <button class="text-red-500 hover:text-red-700" onclick="removeRedirectReferrer('https://elizaidoff.github.io/ResuMaker-')">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </li></ul>
                    </div>
                </section>

                <!-- שינוי סיסמה -->
                <section class="border-b pb-4">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-700">שינוי סיסמה</h3>
                    <div>
                        <label for="admin-new-password" class="block text-gray-700 text-sm font-bold mb-2">סיסמה חדשה:</label>
                        <input type="password" id="admin-new-password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mt-4">
                        <label for="admin-confirm-password" class="block text-gray-700 text-sm font-bold mb-2">אשר סיסמה חדשה:</label>
                        <input type="password" id="admin-confirm-password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <button class="mt-4 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300" onclick="changeAdminPassword()">שנה סיסמה</button>
                    <p id="password-change-message" class="mt-2 text-sm"></p>
                </section>

                <!-- כפתור שמירה והורדה -->
                <div class="mt-8 text-center">
                    <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-xl transition-colors duration-300" onclick="saveAndDownloadSite()">שמור והורד אתר</button>
                </div>
            </div>
        </div>
    </div>

    <!-- מודאל עריכת פוסט (חדש) -->
    <div id="admin-post-edit-modal-overlay" class="fixed inset-0 modal-overlay flex items-center justify-center z-50 hidden">
        <div id="admin-post-edit-modal-content" class="bg-white p-6 rounded-xl shadow-lg max-w-4xl w-11/12 md:w-3/4 lg:w-2/3 xl:w-1/2 relative flex flex-col modal-content">
            <!-- כפתור סגירה -->
            <button class="absolute top-3 left-3 text-gray-500 hover:text-gray-800 text-3xl font-bold" onclick="closeAdminPostEditModal()">
                ×
            </button>
            <h2 class="text-3xl font-bold mb-4 text-gray-800 text-center">ערוך פוסט</h2>

            <div class="modal-body p-2 space-y-4">
                <div>
                    <label for="edit-post-title" class="block text-gray-700 text-sm font-bold mb-2">כותרת פוסט:</label>
                    <input type="text" id="edit-post-title" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div>
                    <label for="edit-post-subtitle" class="block text-gray-700 text-sm font-bold mb-2">כותרת משנה:</label>
                    <input type="text" id="edit-post-subtitle" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div>
                    <label for="edit-post-content" class="block text-gray-700 text-sm font-bold mb-2">תוכן (HTML):</label>
                    <textarea id="edit-post-content" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-48"></textarea>
                </div>
                <div>
                    <label class="block text-gray-700 text-sm font-bold mb-2">תמונת פוסט:</label>
                    <input type="file" id="edit-post-image-upload" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                    <div class="mt-2 flex items-center space-x-4">
                        <img id="edit-post-image-preview" src="" alt="תצוגה מקדימה" class="w-24 h-24 object-cover rounded-lg border hidden">
                        <button class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300" onclick="removeAdminPostEditImage()">הסר תמונה</button>
                    </div>
                </div>
            </div>

            <div class="mt-6 flex justify-end space-x-4 border-t pt-4">
                <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition-colors duration-300" onclick="closeAdminPostEditModal()">
                    ביטול
                </button>
                <button class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300" onclick="saveAdminPostEdit()">
                    שמור שינויים
                </button>
            </div>
        </div>
    </div>

    <!-- מודאל צור קשר -->
    <div id="contact-modal-overlay" class="fixed inset-0 modal-overlay flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-xl shadow-lg w-11/12 max-w-md text-center relative">
            <button class="absolute top-3 left-3 text-gray-500 hover:text-gray-800 text-3xl font-bold" onclick="closeContactModal()">
                ×
            </button>
            <h2 class="text-2xl font-bold mb-4 text-gray-800">צרו קשר</h2>
            <form id="contact-form" action="https://formsubmit.co/elizaidoff@gmail.com" method="POST">
                <input type="hidden" name="_subject" value="New Contact Form Submission from Your Website">
                <input type="hidden" name="_captcha" value="false">
                <input type="hidden" name="_next" value="https://yourdomain.com/thanks.html"> <!-- Formsubmit will ignore this if using AJAX endpoint -->

                <div class="mb-4">
                    <label for="contact-name" class="block text-gray-700 text-right text-sm font-bold mb-2">שם:</label>
                    <input type="text" id="contact-name" name="name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required="">
                </div>
                <div class="mb-4">
                    <label for="contact-email" class="block text-gray-700 text-right text-sm font-bold mb-2">אימייל:</label>
                    <input type="email" id="contact-email" name="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required="">
                </div>
                <div class="mb-4">
                    <label for="contact-phone" class="block text-gray-700 text-right text-sm font-bold mb-2">טלפון (אופציונלי):</label>
                    <input type="tel" id="contact-phone" name="phone" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div class="mb-6">
                    <label for="contact-message" class="block text-gray-700 text-right text-sm font-bold mb-2">הודעה:</label>
                    <textarea id="contact-message" name="message" rows="5" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required=""></textarea>
                </div>
                <button type="submit" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 w-full">
                    שלח הודעה
                </button>
            </form>
        </div>
    </div>

    <!-- הודעת הצלחה - מוסתרת כברירת מחדל -->
    <div id="contact-success-message" class="hidden fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-green-500 text-white p-4 rounded-lg shadow-lg z-[100] text-center opacity-0 transition-opacity duration-500 ease-out">
        הודעתך נשלחה, תודה.
    </div>

    <!-- מודאל אישור גישה חיצונית (לא בשימוש כעת) -->
    <div id="referrer-consent-modal-overlay" class="fixed inset-0 modal-overlay flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-xl shadow-lg w-11/12 max-w-md text-center relative">
            <h2 class="text-2xl font-bold mb-4 text-gray-800">אישור גישה לאתר</h2>
            <p class="text-gray-700 mb-6">האתר <strong id="referrer-consent-domain"></strong> מנסה לגשת לאתר זה.</p>
            <p class="text-gray-700 mb-6">האם לאפשר גישה?</p>
            <div class="flex justify-center space-x-4">
                <button id="referrer-allow-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300">
                    אפשר גישה
                </button>
                <button id="referrer-deny-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300">
                    חסום גישה
                </button>
            </div>
        </div>
    </div>

    <script>
                let websiteData = {
    "adminPassword": "1234",
    "globalBackground": "",
    "header": {
        "mainTitle": "ברוכים הבאים לאתר שלי",
        "subTitle": "כאן תמצאו את כל מה שאתם צריכים"
    },
    "homePageButtons": [
        {
            "id": "homeBtn1",
            "text": "כפתור לדוגמה 1 (פוסט)",
            "type": "post",
            "targetId": "post1",
            "image": "https://placehold.co/60x60/87CEEB/FFFFFF?text=1"
        },
        {
            "id": "homeBtn2",
            "text": "כפתור לדוגמה 2 (חיצוני)",
            "type": "external",
            "targetUrl": "https://www.google.com",
            "target": "_blank",
            "image": "https://placehold.co/60x60/FFD700/FFFFFF?text=2"
        },
        {
            "id": "homeBtn3",
            "text": "כפתור לדוגמה 3 (בלוג)",
            "type": "blog",
            "targetId": "blog",
            "image": "https://placehold.co/60x60/90EE90/FFFFFF?text=3"
        }
    ],
    "blogPage": {
        "title": "הבלוג שלנו",
        "subtitle": "קראו את הפוסטים האחרונים שלנו",
        "posts": [
            {
                "id": "blogPost1",
                "text": "פוסט חדש: טיפים לעיצוב אתרים",
                "targetId": "post1",
                "image": "https://placehold.co/60x60/ADD8E6/FFFFFF?text=P1"
            },
            {
                "id": "blogPost2",
                "text": "מדריך: בניית אתר מהיר",
                "targetId": "post2",
                "image": "https://placehold.co/60x60/FFB6C1/FFFFFF?text=P2"
            },
            {
                "id": "blogPost3",
                "text": "חידושים בעולם ה-AI",
                "targetId": "post3",
                "image": "https://placehold.co/60x60/DDA0DD/FFFFFF?text=P3"
            }
        ]
    },
    "posts": {
        "post1": {
            "title": "טיפים לעיצוב אתרים מודרני",
            "subtitle": "פורסם ב-1 באוגוסט 2025",
            "content": "<p>בעידן הדיגיטלי של היום, עיצוב אתרים הוא קריטי לחווית המשתמש. הנה כמה טיפים שיעזרו לכם ליצור אתר מודרני ומרשים:</p><ul><li><strong>פשטות ומינימליזם:</strong> פחות זה יותר. עיצוב נקי עוזר למשתמש להתמקד בתוכן החשוב.</li><li><strong>רספונסיביות:</strong> ודאו שהאתר נראה ומתפקד היטב בכל המכשירים – מחשבים, טאבלטים וסמארטפונים.</li><li><strong>טיפוגרפיה:</strong> בחרו פונטים קריאים ונעימים לעין. השתמשו בגדלים ומשקלים שונים להדגשה.</li><li><strong>צבעים:</strong> השתמשו בפלטת צבעים מוגבלת ונעימה. צבעים משפיעים על מצב הרוח ועל תפיסת המותג.</li><li><strong>מהירות טעינה:</strong> אתר מהיר משפר את חווית המשתמש ואת דירוג ה-SEO.</li></ul><p>יישום הטיפים הללו יעזור לכם לבנות אתר שלא רק נראה טוב, אלא גם מתפקד מצוין ומספק חוויה חיובית למבקרים.</p>",
            "image": "https://placehold.co/600x300/F0F8FF/333333?text=עיצוב+אתרים"
        },
        "post2": {
            "title": "מדריך מקיף: בניית אתר אינטרנט מהיר ויעיל",
            "subtitle": "פורסם ב-15 ביולי 2025",
            "content": "<p>מהירות טעינה היא אחד הגורמים החשובים ביותר להצלחת אתר אינטרנט. מדריך זה יספק לכם כלים ושיטות לבניית אתר מהיר:</p><ol><li><strong>אופטימיזציה של תמונות:</strong> כווצו תמונות לפני העלאה והשתמשו בפורמטים מודרניים (כמו WebP).</li><li><strong>שימוש ב-CDN:</strong> רשת להפצת תוכן (CDN) מקרבת את התוכן למשתמשים ומאיצה את הטעינה.</li><li><strong>צמצום קוד (Minification):</strong> הסירו רווחים מיותרים ותווים לא נחוצים מקבצי CSS ו-JavaScript.</li><li><strong>Caching:</strong> השתמשו במנגנוני מטמון כדי לשמור עותקים של דפים וקבצים סטטיים.</li><li><strong>בחירת אירוח איכותי:</strong> ספק אירוח אמין ומהיר הוא בסיס לאתר מהיר.</li></ol><p>יישום אסטרטגיות אלו יבטיח שהאתר שלכם יטען במהירות, ישפר את חווית המשתמש ויסייע בקידום במנועי חיפוש.</p>",
            "image": "https://placehold.co/600x300/FFFACD/333333?text=אתר+מהיר"
        },
        "post3": {
            "title": "החידושים האחרונים בעולם הבינה המלאכותית (AI)",
            "subtitle": "פורסם ב-22 ביוני 2025",
            "content": "<p>עולם הבינה המלאכותית מתפתח בקצב מסחרר, עם חידושים כמעט יומיומיים. הנה כמה מההתפתחויות הבולטות ביותר לאחרונה:</p><ul><li><strong>מודלי שפה גדולים (LLMs):</strong> שיפורים משמעותיים ביכולתם להבין, לייצר ולתרגם טקסט באופן טבעי.</li><li><strong>בינה מלאכותית יוצרת (Generative AI):</strong> יצירת תמונות, וידאו, מוזיקה ותוכן כתוב באיכות גבוהה על בסיס הנחיות טקסטואליות.</li><li><strong>AI ברפואה:</strong> שימוש ב-AI לאבחון מחלות, פיתוח תרופות וטיפולים מותאמים אישית.</li><li><strong>רובוטיקה מתקדמת:</b> רובוטים חכמים יותר המסוגלים לבצע משימות מורכבות בסביבות לא מובנות.</li></ul><p>החידושים הללו משנים את הדרך בה אנו עובדים, לומדים ומתקשרים, וצפויים להמשיך ולהשפיע על כל תחומי החיים.</p>",
            "image": "https://placehold.co/600x300/E6E6FA/333333?text=AI+חידושים"
        }
    },
    "kofi": {
        "enabled": false,
        "buttonText": "תמכו בנו ב-Ko-fi",
        "link": "https://ko-fi.com/yourprofile",
        "customText": "אם אהבתם את התוכן, אתם מוזמנים לתמוך בי ב-Ko-fi!"
    },
    "contactEmail": "elizaidoff@gmail.com",
    "externalAccessControl": {
        "redirectReferrers": [
            "https://elizaidoff.github.io/ResuMaker-"
        ]
    }
};
// --- פונקציות עזר כלליות ---

        // פונקציה ליצירת ID ייחודי
        function generateUniqueId(prefix = 'id') {
            return prefix + '_' + Math.random().toString(36).substr(2, 9);
        }

        // פונקציה לטעינת תמונה כ-Base64
        function loadImageAsBase64(file, callback) {
            if (!file) {
                callback('');
                return;
            }
            const reader = new FileReader();
            reader.onload = function(e) {
                callback(e.target.result);
            };
            reader.readAsDataURL(file);
        }

        // --- פונקציות ניווט ותצוגה (צד לקוח) ---

        // פונקציה לניווט בין דפים ראשיים
        function navigateTo(pageId) {
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => page.classList.remove('active')); // הסתר את כל הדפים

            let headerTitle = '';
            let headerSubtitle = '';
            const homeButtonHeader = document.getElementById('home-button-header');

            if (pageId === 'home') {
                document.getElementById('home-page').classList.add('active');
                headerTitle = websiteData.header.mainTitle;
                headerSubtitle = websiteData.header.subTitle;
                currentPageId = 'home';
                homeButtonHeader.classList.add('hidden'); // הסתר את כפתור הבית בדף הבית
            } else if (pageId === 'blog') {
                document.getElementById('blog-page').classList.add('active');
                headerTitle = websiteData.blogPage.title;
                headerSubtitle = websiteData.blogPage.subtitle;
                currentPageId = 'blog';
                homeButtonHeader.classList.remove('hidden'); // הצג את כפתור הבית בדף הבלוג
            }

            // עדכן את הכותרות הראשיות ב-header
            document.getElementById('main-title').textContent = headerTitle;
            document.getElementById('main-subtitle').textContent = headerSubtitle;

            // עדכן את ה-URL באמצעות Hash
            window.location.hash = pageId;
            closePostModal(); // וודא שהמודאל סגור כשמנווטים לדף ראשי
            closeContactModal(); // וודא שמודאל צור קשר סגור
        }

        // פונקציה לפתיחת מודאל פוסט
        function openPostModal(postId) {
            const post = websiteData.posts[postId];
            if (!post) {
                console.error('Post not found:', postId);
                return;
            }

            currentPostId = postId; // שמור את הפוסט הנוכחי
            document.getElementById('modal-post-title').textContent = post.title;
            document.getElementById('modal-post-subtitle').textContent = post.subtitle;

            // טען תוכן הפוסט, כולל תמונה
            let postContentHtml = post.content;
            if (post.image) {
                postContentHtml = `<img src="${post.image}" alt="${post.title}" class="post-image rounded-lg my-4">` + postContentHtml;
            }
            document.getElementById('modal-post-body').innerHTML = postContentHtml;

            // עדכן כפתורי ניווט קודם/הבא
            updatePostNavigationButtons();

            // הצג כפתור Ko-fi וטקסט מותאם אישית אם מופעל
            const kofiAreaContainer = document.getElementById('kofi-area-container');
            const kofiCustomText = document.getElementById('kofi-custom-text');
            const kofiLink = document.getElementById('kofi-button-link');

            if (websiteData.kofi.enabled) {
                kofiLink.href = websiteData.kofi.link;
                kofiLink.textContent = websiteData.kofi.buttonText;
                kofiCustomText.textContent = websiteData.kofi.customText;
                kofiAreaContainer.classList.remove('hidden');
            } else {
                kofiAreaContainer.classList.add('hidden');
            }


            document.getElementById('post-modal-overlay').classList.remove('hidden'); // הצג את המודאל
            window.location.hash = `post-modal-${postId}`; // עדכן את ה-Hash
        }

        // פונקציה לסגירת מודאל פוסט
        function closePostModal() {
            document.getElementById('post-modal-overlay').classList.add('hidden'); // הסתר את המודאל
            currentPostId = null; // אפס את הפוסט הנוכחי
            // חזור ל-hash של הדף הראשי הקודם
            window.location.hash = currentPageId;
        }

        // פונקציה לעדכון כפתורי ניווט בתוך המודאל
        function updatePostNavigationButtons() {
            postOrder = Object.keys(websiteData.posts); // וודא שסדר הפוסטים מעודכן
            const currentIndex = postOrder.indexOf(currentPostId);
            const prevBtn = document.getElementById('prev-post-btn');
            const nextBtn = document.getElementById('next-post-btn');

            prevBtn.disabled = currentIndex <= 0;
            nextBtn.disabled = currentIndex >= postOrder.length - 1;
        }

        // פונקציה לניווט בין פוסטים (קודם/הבא)
        function navigatePost(direction) { // direction: -1 for prev, 1 for next
            const currentIndex = postOrder.indexOf(currentPostId);
            const newIndex = currentIndex + direction;

            if (newIndex >= 0 && newIndex < postOrder.length) {
                openPostModal(postOrder[newIndex]);
            }
        }

        // פונקציה לרינדור כפתורי דף הבית
        function renderHomePageButtons() {
            const container = document.getElementById('home-buttons-container');
            container.innerHTML = ''; // נקה כפתורים קיימים

            // יצירת שני מיכלים (עמודות)
            const col1 = document.createElement('div');
            col1.className = 'flex flex-col space-y-4';
            const col2 = document.createElement('div');
            col2.className = 'flex flex-col space-y-4';

            websiteData.homePageButtons.forEach((button, index) => {
                const buttonElement = document.createElement('a');
                buttonElement.className = 'button-link';
                buttonElement.innerHTML = `
                    <span class="text-xl font-semibold text-gray-800">${button.text}</span>
                    <img src="${button.image}" alt="${button.text}" class="w-14 h-14 rounded-full object-cover border-2 border-blue-400">
                `;

                if (button.type === 'post') {
                    buttonElement.href = `#post-modal-${button.targetId}`;
                    buttonElement.onclick = (e) => { e.preventDefault(); openPostModal(button.targetId); };
                } else if (button.type === 'external') {
                    buttonElement.href = button.targetUrl;
                    buttonElement.target = button.target || '_blank'; // השתמש ביעד שהוגדר או בברירת מחדל
                } else if (button.type === 'blog') {
                    buttonElement.href = `#blog`;
                    buttonElement.onclick = (e) => { e.preventDefault(); navigateTo('blog'); };
                }

                if (index % 2 === 0) { // חלוקה לשתי עמודות
                    col1.appendChild(buttonElement);
                } else {
                    col2.appendChild(buttonElement);
                }
            });
            container.appendChild(col1);
            container.appendChild(col2);
        }

        // פונקציה לרינדור פוסטים בבלוג
        function renderBlogPosts() {
            const container = document.getElementById('blog-posts-container');
            container.innerHTML = ''; // נקה פוסטים קיימים

            websiteData.blogPage.posts.forEach(postRef => {
                const post = websiteData.posts[postRef.targetId];
                if (!post) return; // אם הפוסט לא קיים, דלג

                const postElement = document.createElement('a');
                postElement.className = 'button-link';
                postElement.href = `#post-modal-${postRef.targetId}`;
                postElement.onclick = (e) => { e.preventDefault(); openPostModal(postRef.targetId); };
                postElement.innerHTML = `
                    <span class="text-xl font-semibold text-gray-800">${postRef.text}</span>
                    <img src="${postRef.image}" alt="${postRef.text}" class="w-14 h-14 rounded-full object-cover border-2 border-blue-300">
                `;
                container.appendChild(postElement);
            });
        }

        // פונקציה לטעינה ראשונית של האתר
        function loadWebsite() {
            // עדכן רקע גלובלי
            document.body.style.backgroundImage = websiteData.globalBackground ? `url('${websiteData.globalBackground}')` : 'none';

            renderHomePageButtons();
            renderBlogPosts();
            handleHashChange(); // טען את הדף הנכון לפי ה-Hash ב-URL
        }

        // --- פונקציות פאנל ניהול ---

        // פונקציה לפתיחת מודאל כניסה למנהל
        let headerClickTimer = null;
        let headerClickCount = 0;

        document.getElementById('header-content-area').addEventListener('click', () => {
            headerClickCount++;
            if (headerClickTimer) clearTimeout(headerClickTimer);
            headerClickTimer = setTimeout(() => {
                headerClickCount = 0;
            }, 500); // איפוס מונה לחיצות לאחר 500ms

            if (headerClickCount === 3) {
                document.getElementById('admin-login-modal-overlay').classList.remove('hidden');
                document.getElementById('admin-password-input').value = '';
                document.getElementById('login-error-message').classList.add('hidden');
                headerClickCount = 0; // איפוס מיידי לאחר פתיחה
            }
        });

        function checkAdminPassword() {
            const inputPassword = document.getElementById('admin-password-input').value;
            if (inputPassword === websiteData.adminPassword) {
                document.getElementById('admin-login-modal-overlay').classList.add('hidden');
                openAdminPanel();
            } else {
                document.getElementById('login-error-message').classList.remove('hidden');
            }
        }

        function openAdminPanel() {
            document.getElementById('admin-panel-modal-overlay').classList.remove('hidden');
            // טען נתונים קיימים לפאנל
            document.getElementById('admin-main-title').value = websiteData.header.mainTitle;
            document.getElementById('admin-subtitle').value = websiteData.header.subTitle;
            if (websiteData.globalBackground) {
                document.getElementById('admin-global-bg-preview').src = websiteData.globalBackground;
                document.getElementById('admin-global-bg-preview').classList.remove('hidden');
            } else {
                document.getElementById('admin-global-bg-preview').classList.add('hidden');
            }

            document.getElementById('admin-blog-title').value = websiteData.blogPage.title;
            document.getElementById('admin-blog-subtitle').value = websiteData.blogPage.subtitle;

            document.getElementById('admin-kofi-enabled').checked = websiteData.kofi.enabled;
            document.getElementById('admin-kofi-custom-text').value = websiteData.kofi.customText; // טען את הטקסט המותאם אישית
            document.getElementById('admin-kofi-text').value = websiteData.kofi.buttonText;
            document.getElementById('admin-kofi-link').value = websiteData.kofi.link;

            document.getElementById('admin-contact-email').value = websiteData.contactEmail; // טען את המייל של טופס יצירת קשר

            renderAdminRedirectReferrers(); // טען את רשימת כתובות ה-URL להפניה אוטומטית

            renderAdminHomeButtons();
            renderAdminBlogPosts();
            // renderAdminPostsForEdit(); // הסרנו את הפונקציה הזו
        }

        function closeAdminPanel() {
            document.getElementById('admin-panel-modal-overlay').classList.add('hidden');
            loadWebsite(); // רענן את האתר הציבורי לאחר סגירת פאנל
        }

        // --- עדכון הגדרות כלליות ---
        function updateGeneralSettings() {
            websiteData.header.mainTitle = document.getElementById('admin-main-title').value;
            websiteData.header.subTitle = document.getElementById('admin-subtitle').value;
            // עדכן את התצוגה הציבורית באופן מיידי
            document.getElementById('main-title').textContent = websiteData.header.mainTitle;
            document.getElementById('main-subtitle').textContent = websiteData.header.subTitle;
        }

        document.getElementById('admin-global-bg-upload').addEventListener('change', function(event) {
            loadImageAsBase64(event.target.files[0], (base64) => {
                websiteData.globalBackground = base64;
                document.getElementById('admin-global-bg-preview').src = base64;
                document.getElementById('admin-global-bg-preview').classList.remove('hidden');
                document.body.style.backgroundImage = `url('${base64}')`;
            });
        });

        function removeGlobalBackground() {
            websiteData.globalBackground = '';
            document.getElementById('admin-global-bg-preview').classList.add('hidden');
            document.body.style.backgroundImage = 'none';
            document.getElementById('admin-global-bg-upload').value = ''; // נקה את בחירת הקובץ
        }

        // --- ניהול כפתורי דף הבית ---
        function renderAdminHomeButtons() {
            const container = document.getElementById('admin-home-buttons-list');
            container.innerHTML = '';
            websiteData.homePageButtons.forEach((button, index) => {
                const buttonDiv = document.createElement('div');
                buttonDiv.className = 'flex items-center space-x-4 p-3 border rounded-lg bg-gray-50 relative';
                buttonDiv.draggable = true;
                buttonDiv.dataset.index = index; // לשימוש ב-drag and drop

                let targetSelectHtml = '';
                if (button.type === 'external') {
                    targetSelectHtml = `
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">יעד פתיחה:</label>
                            <select class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onchange="updateHomeButton(${index}, 'target', this.value)">
                                <option value="_blank" ${button.target === '_blank' ? 'selected' : ''}>כרטיסייה חדשה</option>
                                <option value="_self" ${button.target === '_self' ? 'selected' : ''}>אותה כרטיסייה</option>
                            </select>
                        </div>
                    `;
                }

                buttonDiv.innerHTML = `
                    <div class="flex-grow grid grid-cols-1 md:grid-cols-3 gap-2 items-center">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">טקסט:</label>
                            <input type="text" value="${button.text}" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateHomeButton(${index}, 'text', this.value)">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">סוג:</label>
                            <select class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onchange="updateHomeButtonType(${index}, this.value)">
                                <option value="post" ${button.type === 'post' ? 'selected' : ''}>פוסט</option>
                                <option value="external" ${button.type === 'external' ? 'selected' : ''}>קישור חיצוני</option>
                                <option value="blog" ${button.type === 'blog' ? 'selected' : ''}>דף בלוג</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">יעד:</label>
                            <input type="text" value="${button.type === 'external' ? button.targetUrl : button.targetId || ''}" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateHomeButtonTargetValue(${index}, this.value)">
                        </div>
                        ${targetSelectHtml}
                        <div class="md:col-span-3">
                            <label class="block text-gray-700 text-sm font-bold mb-1">תמונה:</label>
                            <input type="file" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" onchange="updateHomeButtonImage(${index}, this.files[0])">
                            <div class="mt-1 flex items-center space-x-2">
                                <img src="${button.image}" alt="תצוגה מקדימה" class="w-10 h-10 rounded-full object-cover border ${button.image ? '' : 'hidden'}">
                                <button class="text-red-500 hover:text-red-700 text-sm" onclick="removeHomeButtonImage(${index})">הסר</button>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-1 ml-2">
                        <button class="text-red-500 hover:text-red-700" onclick="removeHomeButton(${index})">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.927a2.25 2.25 0 01-2.244-2.077L4.74 5.61a1.125 1.125 0 011.12-1.22l10.047-.842a.75.75 0 01.75.75V4.5a2.25 2.25 0 00-2.25-2.25H12.75M15 9V5.25A2.25 2.25 0 0012.75 3h-1.5A2.25 2.25 0 009 5.25V9m-3.75 0h7.5" /></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveHomeButton(${index}, -1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" /></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveHomeButton(${index}, 1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /></svg>
                        </button>
                    </div>
                `;
                container.appendChild(buttonDiv);
            });
            addDragDropListeners(container, websiteData.homePageButtons, renderAdminHomeButtons);
            renderHomePageButtons(); // רענן את התצוגה הציבורית
        }

        function addHomeButton() {
            websiteData.homePageButtons.push({
                id: generateUniqueId('homeBtn'),
                text: 'כפתור חדש',
                type: 'post',
                targetId: generateUniqueId('post'), // יצירת ID פוסט חדש אוטומטית
                image: 'https://placehold.co/60x60/CCCCCC/FFFFFF?text=חדש',
                target: '_blank' // ברירת מחדל לקישור חיצוני
            });
            // אם הכפתור הוא מסוג פוסט, צור פוסט חדש
            const newPostId = websiteData.homePageButtons[websiteData.homePageButtons.length - 1].targetId;
            websiteData.posts[newPostId] = {
                title: 'פוסט חדש',
                subtitle: 'תאריך: ' + new Date().toLocaleDateString('he-IL'),
                content: '<p>תוכן הפוסט החדש כאן.</p>',
                image: ''
            };
            renderAdminHomeButtons();
            // renderAdminPostsForEdit(); // נמחק, עריכה תתבצע דרך הבלוג
        }

        function removeHomeButton(index) {
            const button = websiteData.homePageButtons[index];
            if (button.type === 'post' && websiteData.posts[button.targetId]) {
                // שקול אם למחוק את הפוסט עצמו או רק את הקישור אליו
                // כרגע: מוחק רק את הקישור. אם תרצה למחוק את הפוסט בפועל, הוסף:
                // delete websiteData.posts[button.targetId];
                // renderAdminPostsForEdit();
            }
            websiteData.homePageButtons.splice(index, 1);
            renderAdminHomeButtons();
        }

        // פונקציה כללית לעדכון שדות של כפתור בדף הבית
        function updateHomeButton(index, field, value) {
            websiteData.homePageButtons[index][field] = value;
            renderHomePageButtons(); // רענן את התצוגה הציבורית
        }

        // פונקציה מיוחדת לעדכון סוג הכפתור
        function updateHomeButtonType(index, value) {
            websiteData.homePageButtons[index].type = value;
            // אם משנים לסוג חיצוני, וודא שיש targetUrl ו-target
            if (value === 'external') {
                if (!websiteData.homePageButtons[index].targetUrl) {
                    websiteData.homePageButtons[index].targetUrl = '';
                }
                if (!websiteData.homePageButtons[index].target) {
                    websiteData.homePageButtons[index].target = '_blank';
                }
            } else { // אם משנים לסוג אחר, נקה targetUrl ו-target
                delete websiteData.homePageButtons[index].targetUrl;
                delete websiteData.homePageButtons[index].target;
            }
            renderAdminHomeButtons(); // רענן את פאנל הניהול כדי להציג/להסתיר את שדה היעד
        }

        // פונקציה מיוחדת לעדכון ערך היעד (targetId או targetUrl)
        function updateHomeButtonTargetValue(index, value) {
            const button = websiteData.homePageButtons[index];
            if (button.type === 'external') {
                button.targetUrl = value;
            } else {
                button.targetId = value;
            }
            renderHomePageButtons(); // רענן את התצוגה הציבורית
        }

        function updateHomeButtonImage(index, file) {
            loadImageAsBase64(file, (base64) => {
                websiteData.homePageButtons[index].image = base64;
                renderAdminHomeButtons(); // רענן את התצוגה של פאנל הניהול
            });
        }

        function removeHomeButtonImage(index) {
            websiteData.homePageButtons[index].image = '';
            renderAdminHomeButtons();
        }

        function moveHomeButton(index, direction) {
            const newIndex = index + direction;
            if (newIndex >= 0 && newIndex < websiteData.homePageButtons.length) {
                const [movedItem] = websiteData.homePageButtons.splice(index, 1);
                websiteData.homePageButtons.splice(newIndex, 0, movedItem);
                renderAdminHomeButtons();
            }
        }

        // --- ניהול פוסטים בבלוג ---
        function updateBlogSettings() {
            websiteData.blogPage.title = document.getElementById('admin-blog-title').value;
            websiteData.blogPage.subtitle = document.getElementById('admin-blog-subtitle').value;
            // עדכן את התצוגה הציבורית באופן מיידי
            if (currentPageId === 'blog') {
                document.getElementById('main-title').textContent = websiteData.blogPage.title;
                document.getElementById('main-subtitle').textContent = websiteData.blogPage.subtitle;
            }
        }

        function renderAdminBlogPosts() {
            const container = document.getElementById('admin-blog-posts-list');
            container.innerHTML = '';
            websiteData.blogPage.posts.forEach((postRef, index) => {
                const postDiv = document.createElement('div');
                postDiv.className = 'flex items-center space-x-4 p-3 border rounded-lg bg-gray-50 relative';
                postDiv.draggable = true;
                postDiv.dataset.index = index;

                // יצירת רשימה של פוסטים קיימים לבחירה
                const postOptions = Object.keys(websiteData.posts).map(postId => `
                    <option value="${postId}" ${postRef.targetId === postId ? 'selected' : ''}>
                        ${websiteData.posts[postId].title} (${postId})
                    </option>
                `).join('');

                postDiv.innerHTML = `
                    <div class="flex-grow grid grid-cols-1 md:grid-cols-3 gap-2 items-center">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">טקסט כפתור:</label>
                            <input type="text" value="${postRef.text}" class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onkeyup="updateBlogPostRef(${index}, 'text', this.value)">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-1">בחר פוסט:</label>
                            <select class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight" onchange="updateBlogPostRef(${index}, 'targetId', this.value)">
                                ${postOptions}
                            </select>
                        </div>
                        <div class="md:col-span-3 flex items-center space-x-2">
                            <label class="block text-gray-700 text-sm font-bold mb-1">תמונה:</label>
                            <input type="file" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" onchange="updateBlogPostRefImage(${index}, this.files[0])">
                            <div class="mt-1 flex items-center space-x-2">
                                <img src="${postRef.image}" alt="תצוגה מקדימה" class="w-10 h-10 rounded-full object-cover border ${postRef.image ? '' : 'hidden'}">
                                <button class="text-red-500 hover:text-red-700 text-sm" onclick="removeBlogPostRefImage(${index})">הסר</button>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-1 ml-2">
                        <!-- כפתור עריכת תוכן הפוסט -->
                        <button class="text-blue-500 hover:text-blue-700" onclick="openAdminPostEditModal('${postRef.targetId}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14.25v4.5a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18V7.5A2.25 2.25 0 015.25 5.25h4.5" /></svg>
                        </button>
                        <button class="text-red-500 hover:text-red-700" onclick="removeBlogPost(${index})">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.927a2.25 2.25 0 01-2.244-2.077L4.74 5.61a1.125 1.125 0 011.12-1.22l10.047-.842a.75.75 0 01.75.75V4.5a2.25 2.25 0 00-2.25-2.25H12.75M15 9V5.25A2.25 2.25 0 0012.75 3h-1.5A2.25 2.25 0 009 5.25V9m-3.75 0h7.5" /></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveBlogPost(${index}, -1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" /></svg>
                        </button>
                        <button class="text-gray-500 hover:text-gray-700" onclick="moveBlogPost(${index}, 1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /></svg>
                        </button>
                    </div>
                `;
                container.appendChild(postDiv);
            });
            addDragDropListeners(container, websiteData.blogPage.posts, renderAdminBlogPosts);
            renderBlogPosts(); // רענן את התצוגה הציבורית
        }

        function addBlogPost() {
            const newPostId = generateUniqueId('post');
            websiteData.posts[newPostId] = {
                title: 'פוסט חדש (בלוג)',
                subtitle: 'תאריך: ' + new Date().toLocaleDateString('he-IL'),
                content: '<p>תוכן הפוסט החדש בבלוג כאן.</p>',
                image: ''
            };
            websiteData.blogPage.posts.push({
                id: generateUniqueId('blogRef'),
                text: 'כותרת פוסט חדש',
                targetId: newPostId,
                image: 'https://placehold.co/60x60/CCCCCC/FFFFFF?text=חדש'
            });
            renderAdminBlogPosts();
        }

        function removeBlogPost(index) {
            const postRef = websiteData.blogPage.posts[index];
            // שאל אם למחוק גם את הפוסט עצמו
            if (confirm(`האם אתה בטוח שברצונך למחוק את הקישור לפוסט "${postRef.text}" מהבלוג? \n\nהאם למחוק גם את תוכן הפוסט עצמו (ID: ${postRef.targetId})?`)) {
                if (confirm(`אזהרה: מחיקת תוכן הפוסט תסיר אותו לצמיתות מכל מקום באתר. האם אתה בטוח?`)) {
                    delete websiteData.posts[postRef.targetId];
                    postOrder = Object.keys(websiteData.posts); // רענן את סדר הפוסטים
                }
            }
            websiteData.blogPage.posts.splice(index, 1);
            renderAdminBlogPosts(); // רענן את רשימת הפוסטים בבלוג
        }

        function updateBlogPostRef(index, field, value) {
            websiteData.blogPage.posts[index][field] = value;
            renderBlogPosts();
        }

        function updateBlogPostRefImage(index, file) {
            loadImageAsBase64(file, (base64) => {
                websiteData.blogPage.posts[index].image = base64;
                renderAdminBlogPosts();
            });
        }

        function removeBlogPostRefImage(index) {
            websiteData.blogPage.posts[index].image = '';
            renderAdminBlogPosts();
        }

        function moveBlogPost(index, direction) {
            const newIndex = index + direction;
            if (newIndex >= 0 && newIndex < websiteData.blogPage.posts.length) {
                const [movedItem] = websiteData.blogPage.posts.splice(index, 1);
                websiteData.blogPage.posts.splice(newIndex, 0, movedItem);
                renderAdminBlogPosts();
            }
        }

        // --- ניהול עריכת פוסטים (מודאל חדש) ---
        function openAdminPostEditModal(postId) {
            const post = websiteData.posts[postId];
            if (!post) {
                alert('שגיאה: הפוסט לא נמצא לעריכה.');
                return;
            }
            currentEditingPostId = postId; // שמור את ה-ID של הפוסט הנערך

            document.getElementById('edit-post-title').value = post.title;
            document.getElementById('edit-post-subtitle').value = post.subtitle;
            document.getElementById('edit-post-content').value = post.content;

            const imagePreview = document.getElementById('edit-post-image-preview');
            const imageUploadInput = document.getElementById('edit-post-image-upload');
            imageUploadInput.value = ''; // נקה את בחירת הקובץ הקודמת

            if (post.image) {
                imagePreview.src = post.image;
                imagePreview.classList.remove('hidden');
            } else {
                imagePreview.classList.add('hidden');
                imagePreview.src = '';
            }

            // האזן לשינוי תמונה במודאל העריכה
            imageUploadInput.onchange = (event) => {
                loadImageAsBase64(event.target.files[0], (base64) => {
                    websiteData.posts[currentEditingPostId].image = base64;
                    imagePreview.src = base64;
                    imagePreview.classList.remove('hidden');
                });
            };

            document.getElementById('admin-post-edit-modal-overlay').classList.remove('hidden');
        }

        function closeAdminPostEditModal() {
            document.getElementById('admin-post-edit-modal-overlay').classList.add('hidden');
            currentEditingPostId = null; // אפס את הפוסט הנערך
            renderBlogPosts(); // רענן את תצוגת הבלוג הציבורית
            renderAdminBlogPosts(); // רענן את תצוגת פאנל הניהול של הבלוג
        }

        function saveAdminPostEdit() {
            if (!currentEditingPostId) return;

            websiteData.posts[currentEditingPostId].title = document.getElementById('edit-post-title').value;
            websiteData.posts[currentEditingPostId].subtitle = document.getElementById('edit-post-subtitle').value;
            websiteData.posts[currentEditingPostId].content = document.getElementById('edit-post-content').value;

            closeAdminPostEditModal();
        }

        function removeAdminPostEditImage() {
            if (!currentEditingPostId) return;
            websiteData.posts[currentEditingPostId].image = '';
            document.getElementById('edit-post-image-preview').classList.add('hidden');
            document.getElementById('edit-post-image-preview').src = '';
            document.getElementById('edit-post-image-upload').value = ''; // נקה את בחירת הקובץ
        }


        // --- ניהול הגדרות Ko-fi ---
        function updateKofiSettings() {
            websiteData.kofi.enabled = document.getElementById('admin-kofi-enabled').checked;
            websiteData.kofi.customText = document.getElementById('admin-kofi-custom-text').value; // עדכן את הטקסט המותאם אישית
            websiteData.kofi.buttonText = document.getElementById('admin-kofi-text').value;
            websiteData.kofi.link = document.getElementById('admin-kofi-link').value;
        }

        // --- ניהול הגדרות טופס יצירת קשר ---
        function updateContactSettings() {
            websiteData.contactEmail = document.getElementById('admin-contact-email').value;
        }

        // --- ניהול הפניה אוטומטית לפי אתר מפנה ---
        function addRedirectReferrer() {
            const input = document.getElementById('admin-redirect-referrer-input');
            let url = input.value.trim();
            if (url) {
                try {
                    // נרמל את ה-URL כדי להבטיח עקביות (למשל, להסיר סלאש בסוף)
                    const normalizedUrl = new URL(url).href.replace(/\/$/, '');
                    if (!websiteData.externalAccessControl.redirectReferrers.includes(normalizedUrl)) {
                        websiteData.externalAccessControl.redirectReferrers.push(normalizedUrl);
                        input.value = '';
                        renderAdminRedirectReferrers();
                    }
                } catch (e) {
                    alert('כתובת URL לא חוקית. אנא וודא שהיא מתחילה ב-http:// או https://');
                    console.error('שגיאה בהוספת URL להפניה אוטומטית:', e);
                }
            }
        }

        function removeRedirectReferrer(urlToRemove) {
            websiteData.externalAccessControl.redirectReferrers = websiteData.externalAccessControl.redirectReferrers.filter(u => u !== urlToRemove);
            renderAdminRedirectReferrers();
        }

        function renderAdminRedirectReferrers() {
            const list = document.getElementById('admin-redirect-referrers-list');
            list.innerHTML = '';
            websiteData.externalAccessControl.redirectReferrers.forEach(url => {
                const li = document.createElement('li');
                li.className = 'flex justify-between items-center bg-gray-100 p-2 rounded-lg';
                li.innerHTML = `
                    <span>${url}</span>
                    <button class="text-red-500 hover:text-red-700" onclick="removeRedirectReferrer('${url}')">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                `;
                list.appendChild(li);
            });
        }

        // --- שינוי סיסמה ---
        function changeAdminPassword() {
            const newPass = document.getElementById('admin-new-password').value;
            const confirmPass = document.getElementById('admin-confirm-password').value;
            const messageElement = document.getElementById('password-change-message');

            if (newPass === '' || confirmPass === '') {
                messageElement.textContent = 'אנא הזן סיסמה בשני השדות.';
                messageElement.className = 'mt-2 text-sm text-red-500';
                return;
            }

            if (newPass !== confirmPass) {
                messageElement.textContent = 'הסיסמאות אינן תואמות.';
                messageElement.className = 'mt-2 text-sm text-red-500';
            } else {
                websiteData.adminPassword = newPass;
                messageElement.textContent = 'הסיסמה שונתה בהצלחה!';
                messageElement.className = 'mt-2 text-sm text-green-500';
                document.getElementById('admin-new-password').value = '';
                document.getElementById('admin-confirm-password').value = '';
            }
        }

        // --- Drag and Drop Logic ---
        let draggedItem = null;

        function addDragDropListeners(container, dataArray, renderFunction) {
            container.querySelectorAll('div[draggable="true"]').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    draggedItem = item;
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/html', item.innerHTML);
                    item.classList.add('opacity-50');
                });

                item.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'move';
                    if (item !== draggedItem) {
                        const bounding = item.getBoundingClientRect();
                        const offset = bounding.y + (bounding.height / 2);
                        if (e.clientY < offset) {
                            item.classList.remove('border-b-2', 'border-blue-500');
                            item.classList.add('border-t-2', 'border-blue-500');
                        } else {
                            item.classList.remove('border-t-2', 'border-blue-500');
                            item.classList.add('border-b-2', 'border-blue-500');
                        }
                    }
                });

                item.addEventListener('dragleave', () => {
                    item.classList.remove('border-t-2', 'border-b-2', 'border-blue-500');
                });

                item.addEventListener('drop', (e) => {
                    e.preventDefault();
                    item.classList.remove('border-t-2', 'border-b-2', 'border-blue-500');
                    if (draggedItem !== item) {
                        const draggedIndex = parseInt(draggedItem.dataset.index);
                        const targetIndex = parseInt(item.dataset.index);

                        const [removed] = dataArray.splice(draggedIndex, 1);
                        dataArray.splice(targetIndex, 0, removed);
                        renderFunction(); // רנדר מחדש את הרשימה
                    }
                });

                item.addEventListener('dragend', () => {
                    draggedItem.classList.remove('opacity-50');
                    draggedItem = null;
                    container.querySelectorAll('div[draggable="true"]').forEach(el => {
                        el.classList.remove('border-t-2', 'border-b-2', 'border-blue-500');
                    });
                });
            });
        }


        // --- שמירה והורדה ---
        function saveAndDownloadSite() {
            // שמור את מצב ה-hash הנוכחי כדי לחזור אליו לאחר ההורדה
            const originalHash = window.location.hash;

            // 1. סגור את כל המודאלים ונווט לדף הבית כדי לקבל מצב נקי להורדה
            closeAdminPanel(); // וודא שפאנל הניהול סגור
            closePostModal(); // וודא שמודאל הפוסט סגור
            closeContactModal(); // וודא שמודאל צור קשר סגור
            closeAdminPostEditModal(); // וודא שמודאל עריכת הפוסט סגור
            navigateTo('home'); // נווט לדף הבית

            // עדכן את כל השדות האחרונים לפני שמירה
            updateGeneralSettings();
            updateBlogSettings(); // וודא ששדות הבלוג מעודכנים
            updateKofiSettings(); // וודא ששדות Ko-fi מעודכנים
            updateContactSettings(); // וודא ששדות טופס יצירת קשר מעודכנים
            // אין צורך לעדכן את externalAccessControl.enabled כאן,
            // מכיוון שהוא הוסר לטובת redirectReferrers.
            // אבל נדאג ש-renderAdminRedirectReferrers יקרא את הנתונים הנכונים.

            // צור עותק של הקוד המקורי של הקובץ
            let fullHtml = document.documentElement.outerHTML;

            // מצא את תג הסקריפט שמכיל את websiteData
            const scriptTagStart = fullHtml.indexOf('// אובייקט נתונים מרכזי של האתר');
            const scriptTagEnd = fullHtml.indexOf('// --- פונקציות עזר כלליות ---'); // סוף ה-websiteData block

            if (scriptTagStart !== -1 && scriptTagEnd !== -1) {
                const beforeData = fullHtml.substring(0, scriptTagStart);
                const afterData = fullHtml.substring(scriptTagEnd);

                // הכנס את הנתונים המעודכנים של websiteData
                // וודא שפאנל הניהול סגור בגרסה שמורידים
                const updatedWebsiteDataString = `        let websiteData = ${JSON.stringify(websiteData, null, 4)};\n`;
                fullHtml = beforeData + updatedWebsiteDataString + afterData;
            } else {
                console.error("Could not find websiteData script block to update.");
                alert("שגיאה בשמירת האתר: לא נמצא בלוק נתוני האתר בקוד.");
                return;
            }

            // צור אובייקט Blob מהקוד המעודכן
            const blob = new Blob([fullHtml], { type: 'text/html' });
            const url = URL.createObjectURL(blob);

            // צור קישור להורדה
            const a = document.createElement('a');
            a.href = url;
            a.download = 'index.html'; // שם הקובץ להורדה
            document.body.appendChild(a);
            a.click(); // הפעל את ההורדה
            document.body.removeChild(a);
            URL.revokeObjectURL(url); // שחרר את ה-URL

            alert('האתר נשמר והורד בהצלחה כ-index.html!');

            // חזור למצב ה-hash המקורי בעמוד הנוכחי (לאחר ההורדה)
            window.location.hash = originalHash;
        }


        // --- אתחול וטיפול ב-Hash ---

        // פונקציה לפתיחת מודאל צור קשר
        function openContactModal() {
            document.getElementById('contact-modal-overlay').classList.remove('hidden');
        }

        // פונקציה לסגירת מודאל צור קשר
        function closeContactModal() {
            document.getElementById('contact-modal-overlay').classList.add('hidden');
        }

        // פונקציה להצגת הודעת הצלחה מתפוגגת
        function showSuccessMessage() {
            const messageElement = document.getElementById('contact-success-message');
            messageElement.classList.remove('hidden', 'opacity-0');
            messageElement.classList.add('opacity-100'); // הצג והפעל אנימציית הופעה

            // נקה טיימר קודם אם קיים
            if (successMessageTimeout) {
                clearTimeout(successMessageTimeout);
            }

            // הסתר אוטומטית לאחר 4 שניות
            successMessageTimeout = setTimeout(() => {
                messageElement.classList.remove('opacity-100');
                messageElement.classList.add('opacity-0');
                setTimeout(() => {
                    messageElement.classList.add('hidden');
                }, 500); // המתן לסיום האנימציה לפני הסתרה מלאה
            }, 4000);

            // הסתר בלחיצה כלשהי על המסך
            const clickHandler = () => {
                clearTimeout(successMessageTimeout); // בטל הסתרה אוטומטית
                messageElement.classList.remove('opacity-100');
                messageElement.classList.add('opacity-0');
                setTimeout(() => {
                    messageElement.classList.add('hidden');
                }, 500);
                document.removeEventListener('click', clickHandler); // הסר את ה-listener לאחר לחיצה
            };
            document.addEventListener('click', clickHandler);
        }

        // טיפול בשליחת טופס יצירת קשר באמצעות AJAX
        document.addEventListener('DOMContentLoaded', () => {
            const contactForm = document.getElementById('contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', async function(event) {
                    event.preventDefault(); // מנע שליחה רגילה של הטופס

                    const form = event.target;
                    const formData = new FormData(form);
                    const email = websiteData.contactEmail; // קבל את המייל מאובייקט הנתונים

                    try {
                        const response = await fetch(`https://formsubmit.co/ajax/${email}`, {
                            method: 'POST',
                            body: formData,
                            headers: {
                                'Accept': 'application/json' // חשוב לקבלת תגובת JSON מ-Formsubmit
                            }
                        });

                        if (response.ok) {
                            showSuccessMessage(); // הצג הודעת הצלחה
                            form.reset(); // נקה את שדות הטופס
                            closeContactModal(); // סגור את המודאל
                        } else {
                            const errorData = await response.json();
                            console.error('Form submission failed:', errorData);
                            // ניתן להציג הודעת שגיאה למשתמש
                            alert('אירעה שגיאה בשליחת ההודעה. אנא נסה שוב מאוחר יותר.');
                        }
                    } catch (error) {
                        console.error('Network error or unexpected issue:', error);
                        alert('אירעה שגיאה ברשת. אנא וודא שאתה מחובר לאינטרנט ונסה שוב.');
                    }
                });
            }
        });

        // פונקציה לבדיקת אתר מפנה והפניה אוטומטית
        function checkReferrerAndRedirect() {
            const referrer = document.referrer;
            // אין צורך ב-body.dataset.accessStatus כפי שביקשת
            // const body = document.body;

            if (!referrer) {
                console.log('אין אתר מפנה (Referrer). האתר נטען כרגיל.');
                window.myWebsiteAccessStatus = 'not_applicable'; // עדיין נשמור לשימוש פנימי/לוגים
                return;
            }

            const redirectReferrers = websiteData.externalAccessControl.redirectReferrers;
            let shouldRedirect = false;

            for (const redirectUrl of redirectReferrers) {
                try {
                    // נרמל את שני ה-URLs להשוואה עקבית (למשל, להסיר סלאש בסוף)
                    const normalizedRedirectUrl = new URL(redirectUrl).href.replace(/\/$/, '');
                    const normalizedReferrerUrl = new URL(referrer).href.replace(/\/$/, '');

                    if (normalizedReferrerUrl === normalizedRedirectUrl) {
                        shouldRedirect = true;
                        break;
                    }
                } catch (e) {
                    console.warn(`שגיאה בניתוח URL: ${redirectUrl} או ${referrer}`, e);
                    // אם יש שגיאה בניתוח URL, נתעלם ונמשיך כדי למנוע הפניות לא מכוונות.
                }
            }

            if (shouldRedirect) {
                console.log(`האתר נפתח מכתובת מפנה חסומה: ${referrer}. מפנה בחזרה.`);
                window.myWebsiteAccessStatus = 'denied'; // עדיין נשמור לשימוש פנימי/לוגים
                window.location.href = referrer; // הפניה חזרה לדף המפנה
                // חשוב: ברגע שמבצעים הפניה, שאר קוד הטעינה של הדף לא ירוץ.
                // לכן אין צורך לעשות דבר נוסף כאן.
            } else {
                console.log(`האתר נפתח מכתובת מפנה: ${referrer}. גישה מותרת.`);
                window.myWebsiteAccessStatus = 'allowed'; // עדיין נשמור לשימוש פנימי/לוגים
            }
        }

        // טען את הדף הנכון בעת טעינת העמוד או שינוי ה-hash
        function handleHashChange() {
            const hash = window.location.hash.substring(1); // הסר את ה-#

            if (hash.startsWith('post-modal-')) {
                const postId = hash.substring('post-modal-'.length);
                // וודא שהמודאל נפתח רק אם הוא לא כבר פתוח עם אותו פוסט
                if (currentPostId !== postId || document.getElementById('post-modal-overlay').classList.contains('hidden')) {
                     openPostModal(postId);
                }
            } else if (hash === 'blog') {
                navigateTo('blog');
            } else {
                navigateTo('home'); // ברירת מחדל: דף הבית
            }
        }

        // האזן לשינויים ב-hash של ה-URL (לחיצה על כפתורי חזרה/קדימה בדפדפן)
        window.addEventListener('hashchange', handleHashChange);

        // טען את הדף הראשוני בעת טעינת העמוד
        document.addEventListener('DOMContentLoaded', () => {
            checkReferrerAndRedirect(); // בדוק והפנה לפני טעינת שאר האתר
            loadWebsite(); // טען את שאר האתר רק אם לא בוצעה הפניה
        });
    </script>


</body></html>